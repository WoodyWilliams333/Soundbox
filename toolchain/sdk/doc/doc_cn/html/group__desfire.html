<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>MDP820: desfire</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<script type="text/javascript" src="version.js"></script>
<script type="text/javascript" src="language.js"></script>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MDP820.jpg"/></td>
  <td width="100%" style="padding-left: 0.5em;">
   <div id="projectname" style="display:table-cell;vertical-align:middle;text-align:center">MDP820
		<span id="projectnumber">
			<select>
				<option value ="8.2.3">8.2.3</option>
			</select>
		</span>
   </div>
   <div id="projectbrief">MDP820-API</div>
  </td>
  <td>
    <span id="projectlang" style="margin-right: 1em;">
		<select>
			<!-- <option value ="ch">中文</option> -->
			<!-- <option value ="en">English</option> -->
		</select>
	</span>
   </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__desfire.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">结构体</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">desfire</div>  </div>
</div><!--header-->
<div class="contents">

<p>此模块用于描述desfire模块相关的接口,需链接库<b>libnfc.so</b>编译  
<a href="#details">更多...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
结构体</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__appinfo.html">desfire_appinfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire应用程序信息  <a href="structdesfire__appinfo.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdfname__info.html">dfname_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire卡应用名字信息  <a href="structdfname__info.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__version.html">desfire_version</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire卡的版本信息  <a href="structdesfire__version.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__file.html">desfire_file</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire文件信息  <a href="structdesfire__file.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__std__backup__file__info.html">desfire_std_backup_file_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire一般数据文件信息  <a href="structdesfire__std__backup__file__info.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__value__file__info.html">desfire_value_file_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire值文件信息  <a href="structdesfire__value__file__info.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdesfire__record__file__info.html">desfire_record_file_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desfire线性记录文件信息  <a href="structdesfire__record__file__info.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ga2d1f5d3856481c1e2ae052807e0f5b7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga2d1f5d3856481c1e2ae052807e0f5b7a">desfire_poll</a> (int fd, uint8_t mode, void *uid, uint8_t *atslen, void *ats)</td></tr>
<tr class="memdesc:ga2d1f5d3856481c1e2ae052807e0f5b7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">检测感应区内是否存在mifare DESFire卡，若有，则激活  <a href="group__desfire.html#ga2d1f5d3856481c1e2ae052807e0f5b7a">更多...</a><br /></td></tr>
<tr class="separator:ga2d1f5d3856481c1e2ae052807e0f5b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7f87b7bae28d51540d6bddf8c16e2e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gad7f87b7bae28d51540d6bddf8c16e2e8">desfire_deactive</a> (int fd)</td></tr>
<tr class="memdesc:gad7f87b7bae28d51540d6bddf8c16e2e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">复位mifare DESFire卡  <a href="group__desfire.html#gad7f87b7bae28d51540d6bddf8c16e2e8">更多...</a><br /></td></tr>
<tr class="separator:gad7f87b7bae28d51540d6bddf8c16e2e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3dfeaa74d1420aef2be147858a0e8cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gae3dfeaa74d1420aef2be147858a0e8cc">desfire_authenticate</a> (int fd, uint8_t keyno, const void *key)</td></tr>
<tr class="memdesc:gae3dfeaa74d1420aef2be147858a0e8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">对mifare DESFire卡进行DES/3DES密钥认证  <a href="group__desfire.html#gae3dfeaa74d1420aef2be147858a0e8cc">更多...</a><br /></td></tr>
<tr class="separator:gae3dfeaa74d1420aef2be147858a0e8cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80c143026c57e162bb10c29b639efe9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga80c143026c57e162bb10c29b639efe9a">desfire_authenticate_iso</a> (int fd, uint8_t keyno, const void *key)</td></tr>
<tr class="memdesc:ga80c143026c57e162bb10c29b639efe9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">对mifare DESFire卡进行DES/3DES密钥认证  <a href="group__desfire.html#ga80c143026c57e162bb10c29b639efe9a">更多...</a><br /></td></tr>
<tr class="separator:ga80c143026c57e162bb10c29b639efe9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8a8b7d7ac538bcbae3b3d351ede0d40"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gab8a8b7d7ac538bcbae3b3d351ede0d40">desfire_authenticate_aes</a> (int fd, uint8_t keyno, const void *key)</td></tr>
<tr class="memdesc:gab8a8b7d7ac538bcbae3b3d351ede0d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">对mifare DESFire卡进行AES密钥认证  <a href="group__desfire.html#gab8a8b7d7ac538bcbae3b3d351ede0d40">更多...</a><br /></td></tr>
<tr class="separator:gab8a8b7d7ac538bcbae3b3d351ede0d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87ce4937822a8a0913dc03e796f146fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga87ce4937822a8a0913dc03e796f146fb">desfire_change_key_settings</a> (int fd, uint8_t key_setting)</td></tr>
<tr class="memdesc:ga87ce4937822a8a0913dc03e796f146fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">修改PICC Master Key设置或者Application Master Key设置  <a href="group__desfire.html#ga87ce4937822a8a0913dc03e796f146fb">更多...</a><br /></td></tr>
<tr class="separator:ga87ce4937822a8a0913dc03e796f146fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78508b5e6d1d80c956e3e0ac5fbe31ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga78508b5e6d1d80c956e3e0ac5fbe31ab">desfire_get_key_settings</a> (int fd, uint8_t *key_setting, uint8_t *max_key_num)</td></tr>
<tr class="memdesc:ga78508b5e6d1d80c956e3e0ac5fbe31ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">修改PICC Master Key设置或者Application Master Key设置  <a href="group__desfire.html#ga78508b5e6d1d80c956e3e0ac5fbe31ab">更多...</a><br /></td></tr>
<tr class="separator:ga78508b5e6d1d80c956e3e0ac5fbe31ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f8997aa500616507238008dc777f9c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga3f8997aa500616507238008dc777f9c0">desfire_change_picc_masterkey</a> (int fd, uint8_t type, const void *key, uint8_t version)</td></tr>
<tr class="memdesc:ga3f8997aa500616507238008dc777f9c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">修改PICC Master Key  <a href="group__desfire.html#ga3f8997aa500616507238008dc777f9c0">更多...</a><br /></td></tr>
<tr class="separator:ga3f8997aa500616507238008dc777f9c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22b4d8a26e369a33be7caf2884e92144"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga22b4d8a26e369a33be7caf2884e92144">desfire_change_app_key</a> (int fd, uint8_t keysetting, uint8_t type, uint8_t keyno, const void *oldkey, const void *newkey, uint8_t version)</td></tr>
<tr class="memdesc:ga22b4d8a26e369a33be7caf2884e92144"><td class="mdescLeft">&#160;</td><td class="mdescRight">修改应用密钥  <a href="group__desfire.html#ga22b4d8a26e369a33be7caf2884e92144">更多...</a><br /></td></tr>
<tr class="separator:ga22b4d8a26e369a33be7caf2884e92144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9919612d6f03e3dd8cf101711c84a2b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga9919612d6f03e3dd8cf101711c84a2b8">desfire_get_key_version</a> (int fd, uint8_t keyno, uint8_t *version)</td></tr>
<tr class="memdesc:ga9919612d6f03e3dd8cf101711c84a2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">修改PICC Master Key设置或者Application Master Key设置  <a href="group__desfire.html#ga9919612d6f03e3dd8cf101711c84a2b8">更多...</a><br /></td></tr>
<tr class="separator:ga9919612d6f03e3dd8cf101711c84a2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e6de82a2677dce6d9c90319730fcce4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga2e6de82a2677dce6d9c90319730fcce4">desfire_create_application</a> (int fd, const <a class="el" href="structdesfire__appinfo.html">desfire_appinfo</a> *info)</td></tr>
<tr class="memdesc:ga2e6de82a2677dce6d9c90319730fcce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建一个子应用  <a href="group__desfire.html#ga2e6de82a2677dce6d9c90319730fcce4">更多...</a><br /></td></tr>
<tr class="separator:ga2e6de82a2677dce6d9c90319730fcce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49d6ba10f7c274ef4bed7e69b8074418"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga49d6ba10f7c274ef4bed7e69b8074418">desfire_delete_application</a> (int fd, const void *aid)</td></tr>
<tr class="memdesc:ga49d6ba10f7c274ef4bed7e69b8074418"><td class="mdescLeft">&#160;</td><td class="mdescRight">删除一个子应用  <a href="group__desfire.html#ga49d6ba10f7c274ef4bed7e69b8074418">更多...</a><br /></td></tr>
<tr class="separator:ga49d6ba10f7c274ef4bed7e69b8074418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94495f4de8f424f372c18384a29186bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga94495f4de8f424f372c18384a29186bc">desfire_get_application_ids</a> (int fd, uint8_t *num, void *aid)</td></tr>
<tr class="memdesc:ga94495f4de8f424f372c18384a29186bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取DESFire卡内所有应用的AID信息  <a href="group__desfire.html#ga94495f4de8f424f372c18384a29186bc">更多...</a><br /></td></tr>
<tr class="separator:ga94495f4de8f424f372c18384a29186bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3355f56e0a0d293e19e3ba7301122a70"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga3355f56e0a0d293e19e3ba7301122a70">desfire_get_dfnames</a> (int fd, uint8_t *appnum, <a class="el" href="structdfname__info.html">dfname_info</a> *info)</td></tr>
<tr class="memdesc:ga3355f56e0a0d293e19e3ba7301122a70"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取DESFire卡内所有应用的信息  <a href="group__desfire.html#ga3355f56e0a0d293e19e3ba7301122a70">更多...</a><br /></td></tr>
<tr class="separator:ga3355f56e0a0d293e19e3ba7301122a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab59b67dc6801545e8d4536ef0c2b77f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gab59b67dc6801545e8d4536ef0c2b77f3">desfire_select_application</a> (int fd, const void *aid)</td></tr>
<tr class="memdesc:gab59b67dc6801545e8d4536ef0c2b77f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">选择一个子应用  <a href="group__desfire.html#gab59b67dc6801545e8d4536ef0c2b77f3">更多...</a><br /></td></tr>
<tr class="separator:gab59b67dc6801545e8d4536ef0c2b77f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ac6cdf99bd8c96c02ff5b6baabba52c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga3ac6cdf99bd8c96c02ff5b6baabba52c">desfire_format_picc</a> (int fd)</td></tr>
<tr class="memdesc:ga3ac6cdf99bd8c96c02ff5b6baabba52c"><td class="mdescLeft">&#160;</td><td class="mdescRight">格式化整个DESFire卡，删除所有的应用以及应用下的密钥和文件信息  <a href="group__desfire.html#ga3ac6cdf99bd8c96c02ff5b6baabba52c">更多...</a><br /></td></tr>
<tr class="separator:ga3ac6cdf99bd8c96c02ff5b6baabba52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa268e155e089f2d8cec805a43ff5a279"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gaa268e155e089f2d8cec805a43ff5a279">desfire_get_version</a> (int fd, <a class="el" href="structdesfire__version.html">desfire_version</a> *version)</td></tr>
<tr class="memdesc:gaa268e155e089f2d8cec805a43ff5a279"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取mifare DESFire卡的版本信息  <a href="group__desfire.html#gaa268e155e089f2d8cec805a43ff5a279">更多...</a><br /></td></tr>
<tr class="separator:gaa268e155e089f2d8cec805a43ff5a279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21864e9161aa5b6bad484d38f35f12af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga21864e9161aa5b6bad484d38f35f12af">desfire_set_configuration</a> (int fd, uint8_t option, uint8_t len, const void *info)</td></tr>
<tr class="memdesc:ga21864e9161aa5b6bad484d38f35f12af"><td class="mdescLeft">&#160;</td><td class="mdescRight">配置mifare DESFire卡  <a href="group__desfire.html#ga21864e9161aa5b6bad484d38f35f12af">更多...</a><br /></td></tr>
<tr class="separator:ga21864e9161aa5b6bad484d38f35f12af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63fa0cb60b7445d41c135fc9db2c766e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga63fa0cb60b7445d41c135fc9db2c766e">desfire_free_memory</a> (int fd, uint32_t *freesize)</td></tr>
<tr class="memdesc:ga63fa0cb60b7445d41c135fc9db2c766e"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取mifare DESFire卡的剩余可用空间大小  <a href="group__desfire.html#ga63fa0cb60b7445d41c135fc9db2c766e">更多...</a><br /></td></tr>
<tr class="separator:ga63fa0cb60b7445d41c135fc9db2c766e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga725b0978f1274f4f3bb15fc6c443d7bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga725b0978f1274f4f3bb15fc6c443d7bd">desfire_get_card_uid</a> (int fd, void *uid)</td></tr>
<tr class="memdesc:ga725b0978f1274f4f3bb15fc6c443d7bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取mifare DESFire卡的UID信息  <a href="group__desfire.html#ga725b0978f1274f4f3bb15fc6c443d7bd">更多...</a><br /></td></tr>
<tr class="separator:ga725b0978f1274f4f3bb15fc6c443d7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7887fd93e3d6af76d89649a88878c9c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga7887fd93e3d6af76d89649a88878c9c8">desfire_get_fids</a> (int fd, uint8_t *num, void *fid)</td></tr>
<tr class="memdesc:ga7887fd93e3d6af76d89649a88878c9c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取mifare DESFire卡当前子应用内的文件fid信息  <a href="group__desfire.html#ga7887fd93e3d6af76d89649a88878c9c8">更多...</a><br /></td></tr>
<tr class="separator:ga7887fd93e3d6af76d89649a88878c9c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59dceb04cc71f4461ff2a2e57d7f5402"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga59dceb04cc71f4461ff2a2e57d7f5402">desfire_get_iso_fids</a> (int fd, uint8_t *num, void *fid)</td></tr>
<tr class="memdesc:ga59dceb04cc71f4461ff2a2e57d7f5402"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取mifare DESFire卡当前子应用内的文件iso fid信息  <a href="group__desfire.html#ga59dceb04cc71f4461ff2a2e57d7f5402">更多...</a><br /></td></tr>
<tr class="separator:ga59dceb04cc71f4461ff2a2e57d7f5402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89b9061d28177afee21911324ef276da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga89b9061d28177afee21911324ef276da">desfire_get_filesetting</a> (int fd, uint8_t fileno, <a class="el" href="structdesfire__file.html">desfire_file</a> *filesetting)</td></tr>
<tr class="memdesc:ga89b9061d28177afee21911324ef276da"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定文件的信息  <a href="group__desfire.html#ga89b9061d28177afee21911324ef276da">更多...</a><br /></td></tr>
<tr class="separator:ga89b9061d28177afee21911324ef276da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf59ef4e4aabe0aacd9fc69c3fc7f16ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gaf59ef4e4aabe0aacd9fc69c3fc7f16ad">desfire_change_filesettings</a> (int fd, uint8_t fileno, uint8_t comm_set, uint8_t old_change_access_keyno, uint8_t new_read_access_keyno, uint8_t new_write_access_keyno, uint8_t new_read_write_access_keyno, uint8_t new_change_access_keyno)</td></tr>
<tr class="memdesc:gaf59ef4e4aabe0aacd9fc69c3fc7f16ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定文件的信息  <a href="group__desfire.html#gaf59ef4e4aabe0aacd9fc69c3fc7f16ad">更多...</a><br /></td></tr>
<tr class="separator:gaf59ef4e4aabe0aacd9fc69c3fc7f16ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6809deabde0ddc8ae5a96009600ca9eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga6809deabde0ddc8ae5a96009600ca9eb">desfire_create_std_datafile</a> (int fd, uint8_t fileno, const <a class="el" href="structdesfire__std__backup__file__info.html">desfire_std_backup_file_info</a> *fileinfo)</td></tr>
<tr class="memdesc:ga6809deabde0ddc8ae5a96009600ca9eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建一般数据文件  <a href="group__desfire.html#ga6809deabde0ddc8ae5a96009600ca9eb">更多...</a><br /></td></tr>
<tr class="separator:ga6809deabde0ddc8ae5a96009600ca9eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5567515fda926c918ca7012245041b1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga5567515fda926c918ca7012245041b1e">desfire_create_backup_datafile</a> (int fd, uint8_t fileno, const <a class="el" href="structdesfire__std__backup__file__info.html">desfire_std_backup_file_info</a> *fileinfo)</td></tr>
<tr class="memdesc:ga5567515fda926c918ca7012245041b1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建备份数据文件  <a href="group__desfire.html#ga5567515fda926c918ca7012245041b1e">更多...</a><br /></td></tr>
<tr class="separator:ga5567515fda926c918ca7012245041b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga350987192701297754e2bc1a8326fd0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga350987192701297754e2bc1a8326fd0f">desfire_create_valuefile</a> (int fd, uint8_t fileno, const <a class="el" href="structdesfire__value__file__info.html">desfire_value_file_info</a> *fileinfo)</td></tr>
<tr class="memdesc:ga350987192701297754e2bc1a8326fd0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建值文件  <a href="group__desfire.html#ga350987192701297754e2bc1a8326fd0f">更多...</a><br /></td></tr>
<tr class="separator:ga350987192701297754e2bc1a8326fd0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf35747c1a5329346755f1f57be5d34de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gaf35747c1a5329346755f1f57be5d34de">desfire_create_linear_recordfile</a> (int fd, uint8_t fileno, const <a class="el" href="structdesfire__record__file__info.html">desfire_record_file_info</a> *fileinfo)</td></tr>
<tr class="memdesc:gaf35747c1a5329346755f1f57be5d34de"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建线性记录文件  <a href="group__desfire.html#gaf35747c1a5329346755f1f57be5d34de">更多...</a><br /></td></tr>
<tr class="separator:gaf35747c1a5329346755f1f57be5d34de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1733deef3718eb9f24692c750862b95f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga1733deef3718eb9f24692c750862b95f">desfire_create_cyclic_recordfile</a> (int fd, uint8_t fileno, const <a class="el" href="structdesfire__record__file__info.html">desfire_record_file_info</a> *fileinfo)</td></tr>
<tr class="memdesc:ga1733deef3718eb9f24692c750862b95f"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建循环记录文件  <a href="group__desfire.html#ga1733deef3718eb9f24692c750862b95f">更多...</a><br /></td></tr>
<tr class="separator:ga1733deef3718eb9f24692c750862b95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fcb7d8beba10a145e020d39ba562788"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga1fcb7d8beba10a145e020d39ba562788">desfire_delete_file</a> (int fd, uint8_t fileno)</td></tr>
<tr class="memdesc:ga1fcb7d8beba10a145e020d39ba562788"><td class="mdescLeft">&#160;</td><td class="mdescRight">删除一个文件  <a href="group__desfire.html#ga1fcb7d8beba10a145e020d39ba562788">更多...</a><br /></td></tr>
<tr class="separator:ga1fcb7d8beba10a145e020d39ba562788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16b075f685cac67235816cc1c0d9e81b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga16b075f685cac67235816cc1c0d9e81b">desfire_read_data</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t offset, uint32_t len, uint32_t *outlen, void *dataout)</td></tr>
<tr class="memdesc:ga16b075f685cac67235816cc1c0d9e81b"><td class="mdescLeft">&#160;</td><td class="mdescRight">从一般数据文件或者备份数据文件中读取数据  <a href="group__desfire.html#ga16b075f685cac67235816cc1c0d9e81b">更多...</a><br /></td></tr>
<tr class="separator:ga16b075f685cac67235816cc1c0d9e81b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6a5f6899a40165ee007b282b7063d26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gac6a5f6899a40165ee007b282b7063d26">desfire_read_data_safe</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t offset, uint32_t len, uint32_t *outlen, void *dataout, uint32_t dataout_size)</td></tr>
<tr class="memdesc:gac6a5f6899a40165ee007b282b7063d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">从一般数据文件或者备份数据文件中读取数据  <a href="group__desfire.html#gac6a5f6899a40165ee007b282b7063d26">更多...</a><br /></td></tr>
<tr class="separator:gac6a5f6899a40165ee007b282b7063d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11abb729c1acabf7cae44e77e9919983"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga11abb729c1acabf7cae44e77e9919983">desfire_write_data</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t offset, uint32_t len, const void *datain)</td></tr>
<tr class="memdesc:ga11abb729c1acabf7cae44e77e9919983"><td class="mdescLeft">&#160;</td><td class="mdescRight">往一般数据文件或者备份数据文件中读取数据  <a href="group__desfire.html#ga11abb729c1acabf7cae44e77e9919983">更多...</a><br /></td></tr>
<tr class="separator:ga11abb729c1acabf7cae44e77e9919983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga338301d0db316e26eee60bac526e38da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga338301d0db316e26eee60bac526e38da">desfire_get_value</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t *value)</td></tr>
<tr class="memdesc:ga338301d0db316e26eee60bac526e38da"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定值文件的值大小  <a href="group__desfire.html#ga338301d0db316e26eee60bac526e38da">更多...</a><br /></td></tr>
<tr class="separator:ga338301d0db316e26eee60bac526e38da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga329d012b18d5cf926a2ea3f2908c6825"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga329d012b18d5cf926a2ea3f2908c6825">desfire_credit</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t value)</td></tr>
<tr class="memdesc:ga329d012b18d5cf926a2ea3f2908c6825"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定值文件的值大小  <a href="group__desfire.html#ga329d012b18d5cf926a2ea3f2908c6825">更多...</a><br /></td></tr>
<tr class="separator:ga329d012b18d5cf926a2ea3f2908c6825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8392ebaa22a92852681c418b9ce1cabb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga8392ebaa22a92852681c418b9ce1cabb">desfire_debit</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t value)</td></tr>
<tr class="memdesc:ga8392ebaa22a92852681c418b9ce1cabb"><td class="mdescLeft">&#160;</td><td class="mdescRight">扣值操作  <a href="group__desfire.html#ga8392ebaa22a92852681c418b9ce1cabb">更多...</a><br /></td></tr>
<tr class="separator:ga8392ebaa22a92852681c418b9ce1cabb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ddfbd15927bf9caee91a46dc9cf09ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga1ddfbd15927bf9caee91a46dc9cf09ed">desfire_limited_credit</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t value)</td></tr>
<tr class="memdesc:ga1ddfbd15927bf9caee91a46dc9cf09ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">有限充值操作  <a href="group__desfire.html#ga1ddfbd15927bf9caee91a46dc9cf09ed">更多...</a><br /></td></tr>
<tr class="separator:ga1ddfbd15927bf9caee91a46dc9cf09ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19de066c16edeb695e67cb841b9ff932"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga19de066c16edeb695e67cb841b9ff932">desfire_write_record</a> (int fd, uint8_t fileno, uint8_t comm_set, int offset, int len, const void *info)</td></tr>
<tr class="memdesc:ga19de066c16edeb695e67cb841b9ff932"><td class="mdescLeft">&#160;</td><td class="mdescRight">有限充值操作  <a href="group__desfire.html#ga19de066c16edeb695e67cb841b9ff932">更多...</a><br /></td></tr>
<tr class="separator:ga19de066c16edeb695e67cb841b9ff932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf86bd6f7f589b4a2f74e3ca1337d3204"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gaf86bd6f7f589b4a2f74e3ca1337d3204">desfire_read_records</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t recordsize, int first, int num, uint32_t *outlen, void *info)</td></tr>
<tr class="memdesc:gaf86bd6f7f589b4a2f74e3ca1337d3204"><td class="mdescLeft">&#160;</td><td class="mdescRight">读记录操作  <a href="group__desfire.html#gaf86bd6f7f589b4a2f74e3ca1337d3204">更多...</a><br /></td></tr>
<tr class="separator:gaf86bd6f7f589b4a2f74e3ca1337d3204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81dd884e84eb7ea0b6ce879456e5d463"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga81dd884e84eb7ea0b6ce879456e5d463">desfire_read_records_safe</a> (int fd, uint8_t fileno, uint8_t comm_set, uint32_t recordsize, int first, int num, uint32_t *outlen, void *info, uint32_t info_size)</td></tr>
<tr class="memdesc:ga81dd884e84eb7ea0b6ce879456e5d463"><td class="mdescLeft">&#160;</td><td class="mdescRight">读记录操作  <a href="group__desfire.html#ga81dd884e84eb7ea0b6ce879456e5d463">更多...</a><br /></td></tr>
<tr class="separator:ga81dd884e84eb7ea0b6ce879456e5d463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4381fcd21291ccf6422d4bd88e794db4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga4381fcd21291ccf6422d4bd88e794db4">desfire_clear_recordfile</a> (int fd, uint8_t fileno)</td></tr>
<tr class="memdesc:ga4381fcd21291ccf6422d4bd88e794db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">清除记录文件内的所有  <a href="group__desfire.html#ga4381fcd21291ccf6422d4bd88e794db4">更多...</a><br /></td></tr>
<tr class="separator:ga4381fcd21291ccf6422d4bd88e794db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea55f692433a0adaf880ccc8df2abfa2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#gaea55f692433a0adaf880ccc8df2abfa2">desfire_commit_transaction</a> (int fd)</td></tr>
<tr class="memdesc:gaea55f692433a0adaf880ccc8df2abfa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">确认之前对当前应用内各个文件的相关操作并保存  <a href="group__desfire.html#gaea55f692433a0adaf880ccc8df2abfa2">更多...</a><br /></td></tr>
<tr class="separator:gaea55f692433a0adaf880ccc8df2abfa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29252292a087cbda4c515d0e2f13ab34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__desfire.html#ga29252292a087cbda4c515d0e2f13ab34">desfire_abort_transaction</a> (int fd)</td></tr>
<tr class="memdesc:ga29252292a087cbda4c515d0e2f13ab34"><td class="mdescLeft">&#160;</td><td class="mdescRight">撤销之前队当前应用内各个文件的相关操作  <a href="group__desfire.html#ga29252292a087cbda4c515d0e2f13ab34">更多...</a><br /></td></tr>
<tr class="separator:ga29252292a087cbda4c515d0e2f13ab34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Mifare DESFire卡返回错误码说明</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp4ffbdd2959bbc5b86c796fa374ed3fd8"></a><a class="anchor" id="DESFireErr"></a></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">返回值 </th><th class="markdownTableHeadNone">原因  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1036 </td><td class="markdownTableBodyNone">没有对备份文件做任何更改，不需要提交Transaction/AbortTransaction  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1038 </td><td class="markdownTableBodyNone">NV-Memory内存不足，无法完成命令  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1052 </td><td class="markdownTableBodyNone">不支持命令码  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1054 </td><td class="markdownTableBodyNone">CRC或MAC不匹配，填充字节无效  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1088 </td><td class="markdownTableBodyNone">指定的键号无效  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1150 </td><td class="markdownTableBodyNone">命令字符串长度无效  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1181 </td><td class="markdownTableBodyNone">当前配置/状态不允许请求的命令  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1182 </td><td class="markdownTableBodyNone">参数的值无效  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1184 </td><td class="markdownTableBodyNone">请求的AID在PICC上不存在  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1185 </td><td class="markdownTableBodyNone">应用程序中无法恢复的错误，应用程序将被禁用  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1198 </td><td class="markdownTableBodyNone">当前身份验证状态不允许请求的命令  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1199 </td><td class="markdownTableBodyNone">期望发送更多的数据帧  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1214 </td><td class="markdownTableBodyNone">尝试从/往 文件/记录 限制中 读取/写入 数据，<br  />
或尝试超出文件值的限制  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1217 </td><td class="markdownTableBodyNone">PICC中发生不可恢复的错误，PICC将被禁用  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1226 </td><td class="markdownTableBodyNone">上一个命令尚未完全完成。并非所有的帧都是由PICC请求或提供的  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1229 </td><td class="markdownTableBodyNone">PICC因不可恢复的错误而被禁用  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1230 </td><td class="markdownTableBodyNone">应用程序数量限制为28，无法再添加CreateApplication  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1246 </td><td class="markdownTableBodyNone">文件/应用程序创建失败，因为具有相同编号的文件/应用程序已经存在  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1262 </td><td class="markdownTableBodyNone">由于断电而无法完成NV-Memory写入操作，内部备份/回退机制已激活  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1264 </td><td class="markdownTableBodyNone">指定的文件号不存在  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1265 </td><td class="markdownTableBodyNone">文件内发生不可恢复的错误，文件将被禁用。  </td></tr>
</table>
</td></tr>
<tr class="memitem:gabe8836b162752716da1b4b733317e597"><td class="memItemLeft" align="right" valign="top"><a id="gabe8836b162752716da1b4b733317e597"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DESFireErr</b>&#160;&#160;&#160;&quot;Just to show the table above.&quot;</td></tr>
<tr class="separator:gabe8836b162752716da1b4b733317e597"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p>此模块用于描述desfire模块相关的接口,需链接库<b>libnfc.so</b>编译 </p>
<p>源文件：<a href="desfire_8h_source.html">desfire.h</a> </p>
<h2 class="groupheader">函数说明</h2>
<a id="ga29252292a087cbda4c515d0e2f13ab34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29252292a087cbda4c515d0e2f13ab34">&#9670;&nbsp;</a></span>desfire_abort_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_abort_transaction </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>撤销之前队当前应用内各个文件的相关操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae3dfeaa74d1420aef2be147858a0e8cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3dfeaa74d1420aef2be147858a0e8cc">&#9670;&nbsp;</a></span>desfire_authenticate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_authenticate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>对mifare DESFire卡进行DES/3DES密钥认证 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keyno</td><td>要认证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>密钥信息，固定为16字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ： 输入参数错误 <br  />
 EIO ： 读卡芯片错误 <br  />
 ECOMM ： 卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ： 卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ： 卡片返回数据长度错误 <br  />
 ETIME ： 超时无返回 <br  />
 EACCES ： 感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ： 其它错误码 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>key信息必须为16字节的，如果实际密钥只有8字节，则按下列方式扩展成16字节：<br  />
 <code>key = old_key[0…7] || old_key[0…7]</code> </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gab8a8b7d7ac538bcbae3b3d351ede0d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8a8b7d7ac538bcbae3b3d351ede0d40">&#9670;&nbsp;</a></span>desfire_authenticate_aes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_authenticate_aes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>对mifare DESFire卡进行AES密钥认证 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keyno</td><td>要认证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>密钥信息，固定为16字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>AES密钥固定长度为16字节 </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga80c143026c57e162bb10c29b639efe9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80c143026c57e162bb10c29b639efe9a">&#9670;&nbsp;</a></span>desfire_authenticate_iso()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_authenticate_iso </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>对mifare DESFire卡进行DES/3DES密钥认证 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keyno</td><td>要认证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>密钥信息，固定为24字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>key 信息必须为 24 字节的， 如果实际密钥只有 8 字节， 则按下列方式扩展成 24 字节：<br  />
 <code>key = old_key[0…7] || old_key[0…7] || old_key[0…7]</code></li>
<li>如果实际密钥只有16字节， 则按下列方式扩展成24字节：<br  />
 <code>key = old_key[0…7] || old_key[8…15] || old_key[0…7]</code> </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga22b4d8a26e369a33be7caf2884e92144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22b4d8a26e369a33be7caf2884e92144">&#9670;&nbsp;</a></span>desfire_change_app_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_change_app_key </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keysetting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>oldkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>newkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>修改应用密钥 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keysetting</td><td>应用的master key配置属性参数 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>PICC Master Key密钥类型，取值如下： <br  />
 0x00：DES/3DES密钥（16 字节） <br  />
 0x01：3KDES密钥（24 字节） <br  />
 0x02：AES密钥（16 字节） </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keyno</td><td>要修改的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oldkey</td><td>旧的密钥信息，16/24字节 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newkey</td><td>新的密钥信息，16/24字节 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">version</td><td>密钥版本信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf59ef4e4aabe0aacd9fc69c3fc7f16ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf59ef4e4aabe0aacd9fc69c3fc7f16ad">&#9670;&nbsp;</a></span>desfire_change_filesettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_change_filesettings </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>old_change_access_keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_read_access_keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_write_access_keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_read_write_access_keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_change_access_keyno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定文件的信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>该文件的传输方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_change_access_keyno</td><td>旧的更改密钥需验证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_read_access_keyno</td><td>新的读文件需验证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_write_access_keyno</td><td>新的写文件需验证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_read_write_access_keyno</td><td>新的读写文件需验证的密钥号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_change_access_keyno</td><td>新的更改密钥需验证的密钥号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者CRC校验错 <br  />
 EPROTO ：卡片返回数据不符合ISO14443规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87ce4937822a8a0913dc03e796f146fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87ce4937822a8a0913dc03e796f146fb">&#9670;&nbsp;</a></span>desfire_change_key_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_change_key_settings </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>key_setting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>修改PICC Master Key设置或者Application Master Key设置 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_setting</td><td>新的 Master Key 设置参数 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3f8997aa500616507238008dc777f9c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f8997aa500616507238008dc777f9c0">&#9670;&nbsp;</a></span>desfire_change_picc_masterkey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_change_picc_masterkey </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>修改PICC Master Key </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>PICC Master Key密钥类型，取值如下： <br  />
 0x00：DES/3DES密钥（16 字节） <br  />
 0x01：3KDES密钥（24 字节） <br  />
 0x02：AES密钥（16 字节） </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>密钥信息，16/24字节 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">version</td><td>密钥版本信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者CRC校验错 <br  />
 EPROTO ：卡片返回数据不符合ISO14443规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4381fcd21291ccf6422d4bd88e794db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4381fcd21291ccf6422d4bd88e794db4">&#9670;&nbsp;</a></span>desfire_clear_recordfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_clear_recordfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>清除记录文件内的所有 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaea55f692433a0adaf880ccc8df2abfa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea55f692433a0adaf880ccc8df2abfa2">&#9670;&nbsp;</a></span>desfire_commit_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_commit_transaction </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>确认之前对当前应用内各个文件的相关操作并保存 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2e6de82a2677dce6d9c90319730fcce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e6de82a2677dce6d9c90319730fcce4">&#9670;&nbsp;</a></span>desfire_create_application()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_application </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__appinfo.html">desfire_appinfo</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建一个子应用 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>应用信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5567515fda926c918ca7012245041b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5567515fda926c918ca7012245041b1e">&#9670;&nbsp;</a></span>desfire_create_backup_datafile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_backup_datafile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__std__backup__file__info.html">desfire_std_backup_file_info</a> *&#160;</td>
          <td class="paramname"><em>fileinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建备份数据文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileinfo</td><td>备份数据文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1733deef3718eb9f24692c750862b95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1733deef3718eb9f24692c750862b95f">&#9670;&nbsp;</a></span>desfire_create_cyclic_recordfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_cyclic_recordfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__record__file__info.html">desfire_record_file_info</a> *&#160;</td>
          <td class="paramname"><em>fileinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建循环记录文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileinfo</td><td>循环记录文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf35747c1a5329346755f1f57be5d34de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf35747c1a5329346755f1f57be5d34de">&#9670;&nbsp;</a></span>desfire_create_linear_recordfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_linear_recordfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__record__file__info.html">desfire_record_file_info</a> *&#160;</td>
          <td class="paramname"><em>fileinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建线性记录文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileinfo</td><td>线性记录文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6809deabde0ddc8ae5a96009600ca9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6809deabde0ddc8ae5a96009600ca9eb">&#9670;&nbsp;</a></span>desfire_create_std_datafile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_std_datafile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__std__backup__file__info.html">desfire_std_backup_file_info</a> *&#160;</td>
          <td class="paramname"><em>fileinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建一般数据文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileinfo</td><td>一般数据文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga350987192701297754e2bc1a8326fd0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga350987192701297754e2bc1a8326fd0f">&#9670;&nbsp;</a></span>desfire_create_valuefile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_create_valuefile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdesfire__value__file__info.html">desfire_value_file_info</a> *&#160;</td>
          <td class="paramname"><em>fileinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建值文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileinfo</td><td>值文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga329d012b18d5cf926a2ea3f2908c6825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga329d012b18d5cf926a2ea3f2908c6825">&#9670;&nbsp;</a></span>desfire_credit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_credit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定值文件的值大小 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>充值大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad7f87b7bae28d51540d6bddf8c16e2e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7f87b7bae28d51540d6bddf8c16e2e8">&#9670;&nbsp;</a></span>desfire_deactive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_deactive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>复位mifare DESFire卡 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8392ebaa22a92852681c418b9ce1cabb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8392ebaa22a92852681c418b9ce1cabb">&#9670;&nbsp;</a></span>desfire_debit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_debit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>扣值操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>扣值大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga49d6ba10f7c274ef4bed7e69b8074418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49d6ba10f7c274ef4bed7e69b8074418">&#9670;&nbsp;</a></span>desfire_delete_application()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_delete_application </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>aid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>删除一个子应用 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aid</td><td>应用的AID信息，3字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1fcb7d8beba10a145e020d39ba562788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fcb7d8beba10a145e020d39ba562788">&#9670;&nbsp;</a></span>desfire_delete_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_delete_file </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>删除一个文件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3ac6cdf99bd8c96c02ff5b6baabba52c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ac6cdf99bd8c96c02ff5b6baabba52c">&#9670;&nbsp;</a></span>desfire_format_picc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_format_picc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>格式化整个DESFire卡，删除所有的应用以及应用下的密钥和文件信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga63fa0cb60b7445d41c135fc9db2c766e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63fa0cb60b7445d41c135fc9db2c766e">&#9670;&nbsp;</a></span>desfire_free_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_free_memory </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>freesize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取mifare DESFire卡的剩余可用空间大小 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">freesize</td><td>mifare DESFire卡的剩余可用空间大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga94495f4de8f424f372c18384a29186bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94495f4de8f424f372c18384a29186bc">&#9670;&nbsp;</a></span>desfire_get_application_ids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_application_ids </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>aid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取DESFire卡内所有应用的AID信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num</td><td>卡片包含的应用个数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">aid</td><td>应用的AID信息，3字节/每个应用 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga725b0978f1274f4f3bb15fc6c443d7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga725b0978f1274f4f3bb15fc6c443d7bd">&#9670;&nbsp;</a></span>desfire_get_card_uid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_card_uid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取mifare DESFire卡的UID信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uid</td><td>mifare DESFire卡返回的UID信息，7字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3355f56e0a0d293e19e3ba7301122a70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3355f56e0a0d293e19e3ba7301122a70">&#9670;&nbsp;</a></span>desfire_get_dfnames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_dfnames </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>appnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdfname__info.html">dfname_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取DESFire卡内所有应用的信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">appnum</td><td>卡片包含的应用个数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>应用信息，每个应用一个dfname_info结构 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7887fd93e3d6af76d89649a88878c9c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7887fd93e3d6af76d89649a88878c9c8">&#9670;&nbsp;</a></span>desfire_get_fids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_fids </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取mifare DESFire卡当前子应用内的文件fid信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num</td><td>应用内的文件个数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fid</td><td>文件的fid信息，1字节/每个文件 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga89b9061d28177afee21911324ef276da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89b9061d28177afee21911324ef276da">&#9670;&nbsp;</a></span>desfire_get_filesetting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_filesetting </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdesfire__file.html">desfire_file</a> *&#160;</td>
          <td class="paramname"><em>filesetting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定文件的信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">filesetting</td><td>返回的文件信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ： 输入参数错误 <br  />
 EIO ： 读卡芯片错误 <br  />
 ECOMM ： 卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ： 卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ： 卡片返回数据长度错误 <br  />
 ETIME ： 超时无返回 <br  />
 EACCES ： 感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ： 其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga59dceb04cc71f4461ff2a2e57d7f5402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59dceb04cc71f4461ff2a2e57d7f5402">&#9670;&nbsp;</a></span>desfire_get_iso_fids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_iso_fids </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取mifare DESFire卡当前子应用内的文件iso fid信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num</td><td>应用内的文件个数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fid</td><td>文件的iso fid信息，2字节/每个文件 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga78508b5e6d1d80c956e3e0ac5fbe31ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78508b5e6d1d80c956e3e0ac5fbe31ab">&#9670;&nbsp;</a></span>desfire_get_key_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_key_settings </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>key_setting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>max_key_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>修改PICC Master Key设置或者Application Master Key设置 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_setting</td><td>卡片返回的Master Key设置参数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">max_key_num</td><td>当前应用支持的最大密钥数 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9919612d6f03e3dd8cf101711c84a2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9919612d6f03e3dd8cf101711c84a2b8">&#9670;&nbsp;</a></span>desfire_get_key_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_key_version </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>修改PICC Master Key设置或者Application Master Key设置 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keyno</td><td>密钥号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">version</td><td>卡片返回的密钥版本信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga338301d0db316e26eee60bac526e38da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga338301d0db316e26eee60bac526e38da">&#9670;&nbsp;</a></span>desfire_get_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_value </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定值文件的值大小 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>该值文件的值大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa268e155e089f2d8cec805a43ff5a279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa268e155e089f2d8cec805a43ff5a279">&#9670;&nbsp;</a></span>desfire_get_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_get_version </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdesfire__version.html">desfire_version</a> *&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取mifare DESFire卡的版本信息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">version</td><td>mifare DESFire 卡的版本信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1ddfbd15927bf9caee91a46dc9cf09ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ddfbd15927bf9caee91a46dc9cf09ed">&#9670;&nbsp;</a></span>desfire_limited_credit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_limited_credit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>有限充值操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>充值大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2d1f5d3856481c1e2ae052807e0f5b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d1f5d3856481c1e2ae052807e0f5b7a">&#9670;&nbsp;</a></span>desfire_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_poll </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>atslen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>检测感应区内是否存在mifare DESFire卡，若有，则激活 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>轮询模式，取值如下： <br  />
 0：仅轮询所有处于IDLE状态的卡片 <br  />
 1：轮询所有处于IDLE或者HALT状态的卡片 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uid</td><td>卡片返回的7字节UID信息 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">atslen</td><td>卡片返回的ATS信息长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ats</td><td>卡片返回的ATS信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>寻卡操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 ENODATA ：感应区内无 mifare DESFire 卡 <br  />
 <br  />
 EMULTIHOP ：感应区内有多卡 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 协议 <br  />
 EBADE ：卡片返回的数据长度不正确 <br  />
 EINVAL ：参数错误 <br  />
 ECOMM ：卡片返回的数据奇偶错或者 CRC 校验错 <br  />
 EIO ：读卡芯片错误 <br  />
 ETIME ：超时返回 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga16b075f685cac67235816cc1c0d9e81b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16b075f685cac67235816cc1c0d9e81b">&#9670;&nbsp;</a></span>desfire_read_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_read_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dataout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>从一般数据文件或者备份数据文件中读取数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>读取的起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>希望读取的长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outlen</td><td>实际读取到的数据长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dataout</td><td>实际读取到的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac6a5f6899a40165ee007b282b7063d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6a5f6899a40165ee007b282b7063d26">&#9670;&nbsp;</a></span>desfire_read_data_safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_read_data_safe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dataout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dataout_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>从一般数据文件或者备份数据文件中读取数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>读取的起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>希望读取的长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outlen</td><td>实际读取到的数据长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dataout</td><td>实际读取到的数据 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dataout_size</td><td>dataout 的缓存大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 ENOSPC ：dataout空间小于接收数据大小 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf86bd6f7f589b4a2f74e3ca1337d3204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf86bd6f7f589b4a2f74e3ca1337d3204">&#9670;&nbsp;</a></span>desfire_read_records()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_read_records </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>recordsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>读记录操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recordsize</td><td>记录长度 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first</td><td>要读取的第一条记录号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>要读取的记录数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outlen</td><td>读出来的数据总长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>读出来的记录信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga81dd884e84eb7ea0b6ce879456e5d463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81dd884e84eb7ea0b6ce879456e5d463">&#9670;&nbsp;</a></span>desfire_read_records_safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_read_records_safe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>recordsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>info_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>读记录操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recordsize</td><td>记录长度 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first</td><td>要读取的第一条记录号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>要读取的记录数 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outlen</td><td>读出来的数据总长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>读出来的记录信息 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info_size</td><td>info 的缓存大小 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab59b67dc6801545e8d4536ef0c2b77f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab59b67dc6801545e8d4536ef0c2b77f3">&#9670;&nbsp;</a></span>desfire_select_application()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_select_application </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>aid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>选择一个子应用 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aid</td><td>应用的AID信息，3字节 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga21864e9161aa5b6bad484d38f35f12af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga21864e9161aa5b6bad484d38f35f12af">&#9670;&nbsp;</a></span>desfire_set_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_set_configuration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>配置mifare DESFire卡 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">option</td><td>配置信息选项 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>配置信息长度 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>配置信息内容 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga11abb729c1acabf7cae44e77e9919983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11abb729c1acabf7cae44e77e9919983">&#9670;&nbsp;</a></span>desfire_write_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_write_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>datain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>往一般数据文件或者备份数据文件中读取数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>写入的起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>要写入的数据长度 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">datain</td><td>要写入的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是mifare DESFire卡或者卡片未激活 <br  />
 其他值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga19de066c16edeb695e67cb841b9ff932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19de066c16edeb695e67cb841b9ff932">&#9670;&nbsp;</a></span>desfire_write_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int desfire_write_record </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fileno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>comm_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>有限充值操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>mif_open函数返回所打开设备的文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileno</td><td>文件号 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comm_set</td><td>通信方式，取值如下： <br  />
 0x00：明文传输 <br  />
 0x03：加密传输 <br  />
 0x01：带MAC校验传输 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>当前记录内的起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>要写入的数据长度 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>要写入的记录信息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>操作成功 </td></tr>
    <tr><td class="paramname">-1</td><td>操作失败，请通过errno获取具体的错误码： <br  />
 EINVAL ：输入参数错误 <br  />
 EIO ：读卡芯片错误 <br  />
 ECOMM ：卡片返回数据奇偶错或者 CRC 校验错 <br  />
 EPROTO ：卡片返回数据不符合 ISO14443 规范 <br  />
 EBADE ：卡片返回数据长度错误 <br  />
 ETIME ：超时无返回 <br  />
 EACCES ：感应区内的卡片不是 mifare DESFire 卡或者卡片未激活 <br  />
 其它值 ：其它错误码 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
